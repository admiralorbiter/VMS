{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
  <div class="admin-card p-4 mb-3">
    <form class="row g-2" method="get" action="{{ url_for('client_projects.index') }}">
      <div class="col-md-3">
        <input type="text" class="form-control" name="q" placeholder="Search title/description" value="{{ (filters.q if filters else '') or '' }}">
      </div>
      <div class="col-md-2">
        <input type="text" class="form-control" name="status" placeholder="Status" value="{{ (filters.status if filters else '') or '' }}">
      </div>
      <div class="col-md-2">
        <input type="text" class="form-control" name="district" placeholder="District" value="{{ (filters.district if filters else '') or '' }}">
      </div>
      <div class="col-md-2">
        <input type="text" class="form-control" name="organization" placeholder="Organization" value="{{ (filters.organization if filters else '') or '' }}">
      </div>
      <div class="col-md-2">
        <select class="form-select" name="per_page">
          {% for n in [25,50,100,200] %}
          <option value="{{n}}" {% if filters and filters.per_page == n %}selected{% endif %}>{{n}} / page</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-1">
        <button class="btn btn-primary w-100" type="submit">Apply</button>
      </div>
    </form>
  </div>

  {% include 'client_connected_projects/partials/project_table.html' %}

  {% if pagination %}
  <nav aria-label="Projects pagination">
    <ul class="pagination">
      <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
        <a class="page-link" href="{{ url_for('client_projects.index', q=filters.q, status=filters.status, district=filters.district, organization=filters.organization, page=pagination.prev_num, per_page=filters.per_page) }}">Previous</a>
      </li>
      <li class="page-item disabled"><span class="page-link">Page {{ pagination.page }} of {{ pagination.pages }}</span></li>
      <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
        <a class="page-link" href="{{ url_for('client_projects.index', q=filters.q, status=filters.status, district=filters.district, organization=filters.organization, page=pagination.next_num, per_page=filters.per_page) }}">Next</a>
      </li>
    </ul>
  </nav>
  {% endif %}
</div>
{% endblock %}
